#include "lcd.h"

unsigned char int_num[][42]={{

0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x00,0x3B,0x80,0x71,0xC0,0x71,0xC0,
0x71,0xC0,0xE1,0xE0,0xE0,0xE0,0xE0,0xE0,0xE1,0xE0,0x71,0xC0,0x71,0xC0,0x71,0xC0,
0x3B,0x80,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
},//字符0
{
 /*--  文字:  1  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x3E,0x00,0x1E,0x00,0x0E,0x00,
0x0E,0x00,0x0E,0x00,0x0E,0x00,0x0E,0x00,0x0E,0x00,0x0E,0x00,0x0E,0x00,0x0E,0x00,
0x0E,0x00,0x3F,0x80,0x00,0x00,0x00,0x00,0x00,0x00,},//字符1
{
/*--  文字:  2  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x80,0x73,0xC0,0x61,0xC0,0x71,0xC0,
0x71,0xC0,0x01,0xC0,0x03,0x80,0x07,0x00,0x0E,0x00,0x1C,0x00,0x38,0x40,0x70,0xC0,
0x7F,0xC0,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,
},//字符2
{
/*--  文字:  3  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x73,0x80,0x71,0xC0,0x71,0xC0,
0x01,0x80,0x07,0x80,0x0F,0x00,0x03,0x80,0x01,0xC0,0x01,0xC0,0x71,0xC0,0x71,0xC0,
0x73,0x80,0x3F,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
},//字符3
{
/*--  文字:  4  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x80,0x07,0x80,0x07,0x80,0x0F,0x80,
0x1F,0x80,0x3B,0x80,0x33,0x80,0x63,0x80,0xE3,0x80,0xFF,0xE0,0x03,0x80,0x03,0x80,
0x03,0x80,0x0F,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
},//字符4
{/*--  文字:  5  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0xC0,0x3F,0x80,0x70,0x00,0x70,0x00,
0x60,0x00,0x7F,0x80,0x7B,0xC0,0x61,0xC0,0x01,0xC0,0x00,0xC0,0x71,0xC0,0x71,0xC0,
0x73,0x80,0x3F,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
},//字符5
{/*--  文字:  6  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x80,0x3D,0xC0,0x71,0xC0,0x70,0x00,
0x70,0x00,0xFF,0x80,0xFB,0xC0,0xF1,0xC0,0xE0,0xE0,0xE0,0xE0,0x70,0xE0,0x71,0xC0,
0x3B,0xC0,0x1F,0x80,0x00,0x00,0x00,0x00,0x00,0x00,},//字符6
{/*--  文字:  7  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0xE0,0x7F,0xC0,0x61,0x80,0x41,0x80,
0x03,0x00,0x07,0x00,0x06,0x00,0x0E,0x00,0x0E,0x00,0x0C,0x00,0x1C,0x00,0x1C,0x00,
0x1C,0x00,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
},//字符7
{/*--  文字:  8  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x80,0x7B,0xC0,0x61,0xC0,0x60,0xC0,
0x71,0xC0,0x79,0x80,0x1F,0x00,0x37,0x80,0x63,0xC0,0xE1,0xC0,0xE0,0xC0,0xE1,0xC0,
0x7B,0xC0,0x3F,0x80,0x00,0x00,0x00,0x00,0x00,0x00,
},//字符8
{/*--  文字:  9  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=11x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=16x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x7B,0x80,0x71,0xC0,0xE1,0xC0,
0xE1,0xC0,0xE1,0xE0,0xE1,0xE0,0x7B,0xC0,0x3F,0xC0,0x01,0xC0,0x01,0xC0,0x73,0x80,
0x77,0x80,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,}//字符9
};

unsigned char Point[]={
    /*--  文字:  ·  --*/
/*--  宋体16;  此字体下对应的点阵为：宽x高=21x21   --*/
/*--  宽度不是8的倍数，现调整为：宽度x高度=24x21  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x00,0x01,0xFC,0x00,0x01,0xFC,
0x00,0x01,0xF8,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

/*
    @num_display:在开发板任意位置显示数字
    无返回值
    @const char num[]:要显示的数字取模后的数据
    @x0,y0:表示从开发板上的哪个位置开始显示该数字
    @w , h :数字的宽度和高度
*/
void num_display(const char num[],int x0 , int y0,int w , int h)
{
    int dian; //第dian个像素点

    for(dian = 0; dian <w * h;dian++)
    {
        //要在屏幕上的合适位置显示这个像素点

        int x , y; //（x,y)这个dian像素点，在屏幕上的显示位置

        y = y0 + dian / w;//该点在原始汉字的第dian / w行

        x = x0 + dian % w;//该点在原始汉字的第dian % w列

        //dian这个像素点取模后在数组num[]的第几个元素中呢？
        int index = dian / 8;//表示数组元素的下标

        //num[index] 包括8个bit位，那么该点到底在第几bit位呢？
        int bit = 7 - dian % 8;//在字节中的第几bits

        int color;//这个像素点要显示的颜色

        //如果该bits为1表示显示颜色，为0表示不显示颜色
        if(num[index] & (1 << bit))
        {
            //该像素点在笔划上
            color = 0;
        }
        else
        {
            //该像素点不在笔划上
            color = 0xff0000;
        }

        lcd_draw_point(x,y,color);

    }
}


/*
    double_display: 在屏幕上合适位置上显示一个小数(只保留两位小数)
    @digtal: 要显示的小数(保留两位小数)
    @x0: 显示位置的x轴坐标
    @y0: 显示位置的y轴坐标
    返回值：
        无。
*/
void double_display(double digtal, int x0, int y0)
{
    // digtal * 100
    // 整数部分 .  小数部分
    int dou_digtal= digtal*100;
    int num[20];
    int count=0; // 记录数字个数
    do
    {
       num[count++]=dou_digtal%10;
       dou_digtal /=10;
    } while (dou_digtal!=0);
    int j = 0;
    for(j=count-1;j>=0;j--)
    {
        
        num_display(int_num[num[j]%10],x0+=25,y0, 16, 21);
        if(j==2)
        {
            num_display(Point,x0+=25,y0, 24, 21); // 插入小数点
        }
       
    }
}